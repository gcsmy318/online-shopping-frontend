(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{8834:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return l(3954)}])},3954:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var a=l(4848),s=l(2992),r=l(6540),n=l(6715);function d(){let{cart:e,updateQuantity:t,removeFromCart:l,clearCart:d}=(0,s._)(),o=(0,n.useRouter)(),[c,i]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),f=e.reduce((e,t)=>e+t.price*t.quantity,0),j=async()=>{if(!c.trim()||!u.trim()||!x.trim()){N("❌ กรุณากรอกข้อมูลให้ครบทุกช่อง (Please fill in all fields.) ");return}N(""),g(!0);try{(await fetch("https://online-shopping-backend-production.up.railway.app/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,address:u,phone:x,cart:e,totalPrice:f})})).ok?(alert("✅ สั่งซื้อสำเร็จ! ระบบจะพาคุณกลับไปที่หน้าหลัก (Order completed! You will be taken back to the home page.)"),d(),o.push("https://organeh.com")):alert("❌ ไม่สามารถสั่งซื้อได้ (Unable to order) !")}catch(e){console.error(e),alert("❌ เกิดข้อผิดพลาดในการสั่งสินค้า (There was an error while ordering.)!")}finally{g(!1)}};return(0,a.jsxs)("div",{className:"p-10 max-w-lg mx-auto bg-gray-100 rounded-lg shadow-lg",children:[(0,a.jsx)("button",{className:"mb-5 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 flex items-center",onClick:()=>o.back(),children:"⬅️ ย้อนกลับ (ฺฺBack)"}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-5 text-center",children:"\uD83D\uDED2 ตะกร้าสินค้าของคุณ (Your cart.) "}),0===e.length?(0,a.jsx)("p",{className:"text-red-500 text-lg text-center",children:"❌ ตะกร้าสินค้าว่าง (Cart is empty.)"}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg shadow p-4 flex items-center gap-4 bg-white",children:[(0,a.jsx)("img",{src:e.image.startsWith("http")?e.image:"https://organeh.com/shop".concat(e.image),alt:e.name,className:"w-24 h-24 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-lg font-bold text-blue-500",children:[e.price,"฿"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("button",{className:"bg-gray-300 px-3 py-1 rounded text-lg",onClick:()=>t(e.id,e.quantity-1),children:"➖"}),(0,a.jsx)("span",{className:"text-lg",children:e.quantity}),(0,a.jsx)("button",{className:"bg-gray-300 px-3 py-1 rounded text-lg",onClick:()=>t(e.id,e.quantity+1),children:"➕"})]})]}),(0,a.jsx)("button",{className:"bg-red-500 text-white px-3 py-2 rounded hover:bg-red-700 flex items-center",onClick:()=>l(e.id),children:"\uD83D\uDDD1 ลบ"})]},e.id))}),e.length>0&&(0,a.jsxs)("h2",{className:"text-2xl font-bold text-green-500 mt-5 text-center",children:["\uD83D\uDCB0 ราคารวมทั้งหมด (Total price): ",f,"฿"]}),(0,a.jsxs)("div",{className:"mt-5 bg-white p-5 rounded-lg shadow-lg",children:[(0,a.jsx)("label",{className:"block text-lg font-bold",children:"\uD83D\uDC64 ชื่อ (Name) :"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>i(e.target.value),className:"w-full border p-2 rounded mt-1",placeholder:"กรอกชื่อของคุณ..."}),(0,a.jsx)("label",{className:"block text-lg font-bold mt-3",children:"\uD83D\uDCCD ที่อยู่ (Address) :"}),(0,a.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),className:"w-full border p-2 rounded mt-1",placeholder:"กรอกที่อยู่ของคุณ...",rows:"3"}),(0,a.jsx)("label",{className:"block text-lg font-bold mt-3",children:"\uD83D\uDCDE เบอร์โทร (Telephone):"}),(0,a.jsx)("input",{type:"tel",value:x,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded mt-1",placeholder:"กรอกเบอร์โทรศัพท์ของคุณ..."}),b&&(0,a.jsx)("p",{className:"text-red-500 mt-3",children:b}),(0,a.jsx)("button",{className:"mt-4 bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-700 w-full text-lg",onClick:j,disabled:p||0===e.length,children:p?"⏳ กำลังสั่งซื้อ(Ordering)...":"\uD83D\uDECD สั่งซื้อสินค้า(Order)"})]})]})}},6715:(e,t,l)=>{e.exports=l(8440)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8834)),_N_E=e.O()}]);