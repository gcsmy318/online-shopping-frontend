(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{8834:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return s(3954)}])},3954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(4848),l=s(2992),n=s(6540),c=s(6715),r=s(9965),i=s.n(r);function d(){let{cart:e,updateQuantity:t,removeFromCart:s,clearCart:r}=(0,l._)(),d=(0,c.useRouter)(),[o,x]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[h,b]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[D,f]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[v,C]=(0,n.useState)(!1),[k,_]=(0,n.useState)(!1),S=(0,n.useRef)(null),E=e.reduce((e,t)=>e+t.price*t.quantity,0),O=async()=>{if(!o||!u||!h){g("❌ กรุณากรอกข้อมูลให้ครบ");return}g(""),S.current&&(clearInterval(S.current),S.current=null),N(""),C(!1),_(!1),await P()},P=async()=>{var e,t,s;let a=await fetch("".concat("https://online-shopping-backend-production.up.railway.app","/api/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*E})}),l=await a.json(),n=null==l?void 0:null===(s=l.source)||void 0===s?void 0:null===(t=s.scannable_code)||void 0===t?void 0:null===(e=t.image)||void 0===e?void 0:e.download_uri,c=null==l?void 0:l.id;if(!n||!c){alert("❌ ไม่สามารถสร้าง QR Code ได้");return}N(n),C(!0),T(c)},T=t=>{let s=0,a=1e4,l=async()=>{let n=await fetch("".concat("https://online-shopping-backend-production.up.railway.app","/api/status/").concat(t));(await n.json()).paid?(clearInterval(S.current),S.current=null,C(!1),_(!0),(await fetch("".concat("https://online-shopping-backend-production.up.railway.app","/api/order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,address:u,phone:h,cart:e,totalPrice:E})})).ok?(alert("✅ ชำระเงินและส่งอีเมลสำเร็จ!"),r(),x(""),m(""),b(""),N(""),_(!1),d.push("https://organeh.com")):(alert("⚠️ ชำระสำเร็จ แต่ส่งอีเมลไม่สำเร็จ"),_(!1))):3==++s&&(clearInterval(S.current),a=3e4,S.current=setInterval(l,a))};S.current=setInterval(l,a),setTimeout(()=>{S.current&&clearInterval(S.current)},3e5)};return(0,a.jsxs)("div",{className:"p-10 max-w-lg mx-auto bg-gray-100 rounded-lg shadow-lg relative",children:[k&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center z-50",children:(0,a.jsx)("div",{className:"text-xl text-blue-600 font-bold",children:"⏳ กำลังทำรายการ กรุณารอสักครู่..."})}),(0,a.jsx)("button",{className:"mb-5 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 flex items-center",onClick:()=>d.back(),children:"⬅️ ย้อนกลับ"}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-5 text-center",children:"\uD83D\uDED2 ตะกร้าสินค้าของคุณ"}),0===e.length?(0,a.jsx)("p",{className:"text-red-500 text-lg text-center",children:"❌ ตะกร้าสินค้าว่าง"}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg shadow p-4 flex items-center gap-4 bg-white",children:[(0,a.jsx)(i(),{src:e.image.startsWith("https")?e.image:"https://organeh.com/shop".concat(e.image),alt:e.name,width:96,height:96,className:"object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-lg font-bold text-blue-500",children:[e.price,"฿"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("button",{className:"bg-gray-300 px-3 py-1 rounded text-lg",onClick:()=>t(e.id,e.quantity-1),children:"➖"}),(0,a.jsx)("span",{className:"text-lg",children:e.quantity}),(0,a.jsx)("button",{className:"bg-gray-300 px-3 py-1 rounded text-lg",onClick:()=>t(e.id,e.quantity+1),children:"➕"})]})]}),(0,a.jsx)("button",{className:"bg-red-500 text-white px-3 py-2 rounded hover:bg-red-700 flex items-center",onClick:()=>s(e.id),children:"\uD83D\uDDD1 ลบ"})]},e.id))}),e.length>0&&(0,a.jsxs)("h2",{className:"text-2xl font-bold text-green-500 mt-5 text-center",children:["\uD83D\uDCB0 ราคารวมทั้งหมด: ",E,"฿"]}),(0,a.jsxs)("div",{className:"mt-5 bg-white p-5 rounded-lg shadow-lg",children:[(0,a.jsx)("label",{className:"block text-lg font-bold",children:"\uD83D\uDC64 ชื่อ :"}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full border p-2 rounded mt-1"}),(0,a.jsx)("label",{className:"block text-lg font-bold mt-3",children:"\uD83D\uDCCD ที่อยู่ :"}),(0,a.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded mt-1",rows:"3"}),(0,a.jsx)("label",{className:"block text-lg font-bold mt-3",children:"\uD83D\uDCDE เบอร์โทร :"}),(0,a.jsx)("input",{type:"tel",value:h,onChange:e=>b(e.target.value),className:"w-full border p-2 rounded mt-1"}),p&&(0,a.jsx)("p",{className:"text-red-500 mt-3",children:p}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:D,onChange:e=>f(e.target.checked),className:"w-5 h-5"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["ฉันยอมรับ"," ",(0,a.jsx)("button",{type:"button",className:"text-blue-500 underline",onClick:()=>y(!0),children:"เงื่อนไขและนโยบายการชำระเงิน"})]})]})}),(0,a.jsx)("button",{className:"mt-4 text-white px-6 py-2 rounded w-full text-lg ".concat(D?"bg-blue-500 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),onClick:O,disabled:0===e.length||!D,children:"\uD83D\uDECD สั่งซื้อสินค้า"})]}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-lg my-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-center",children:"\uD83D\uDCDD นโยบายการชำระเงินและการสั่งซื้อ"}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDCCC 1. เงื่อนไขการสั่งซื้อ"}),(0,a.jsx)("p",{className:"text-gray-700",children:"ลูกค้าจะต้องกรอกข้อมูลให้ครบถ้วนและถูกต้องก่อนทำการสั่งซื้อสินค้า หากข้อมูลไม่ครบถ้วน อาจทำให้ไม่สามารถจัดส่งสินค้าได้อย่างถูกต้อง"})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDCB3 2. วิธีการชำระเงิน"}),(0,a.jsx)("p",{className:"text-gray-700",children:"ระบบจะสร้าง QR Code สำหรับชำระเงินผ่าน Omise (พร้อมเพย์) ซึ่งลูกค้าต้องทำรายการภายใน 5 นาทีหลังจากได้รับ QR Code หากไม่ชำระภายในเวลาที่กำหนด จะต้องสั่งซื้อใหม่อีกครั้ง"})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDCE4 3. การยืนยันคำสั่งซื้อ"}),(0,a.jsx)("p",{className:"text-gray-700",children:"หลังจากชำระเงินสำเร็จ ระบบจะทำการยืนยันคำสั่งซื้อโดยอัตโนมัติ และจะมีอีเมลยืนยันถูกส่งไปยังอีเมลของผู้ขาย"})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDD01 4. นโยบายการคืนเงิน"}),(0,a.jsx)("p",{className:"text-gray-700",children:"การคืนเงินจะพิจารณาเป็นกรณีไป โดยเฉพาะกรณีที่สินค้าไม่ตรงตามคำอธิบาย หรือเกิดข้อผิดพลาดจากทางร้าน กรุณาติดต่อภายใน 3 วันหลังได้รับสินค้า"})]}),(0,a.jsxs)("section",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDCDE 5. ติดต่อสอบถาม"}),(0,a.jsxs)("p",{className:"text-gray-700",children:["หากมีข้อสงสัยหรือต้องการสอบถามเกี่ยวกับคำสั่งซื้อ กรุณาติดต่อทีมงานผ่านทางอีเมล ",(0,a.jsx)("span",{className:"text-blue-600",children:"ilamoonshopping@gmail.com"})," หรือทาง Facebook Page ของเรา"]})]}),(0,a.jsx)("p",{className:"text-center text-gray-500 mt-10 text-sm",children:"ปรับปรุงล่าสุด: 7 มิถุนายน 2025"})]}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"mt-6 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 block mx-auto",children:"ปิด"})]})}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center max-w-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCF2 สแกนเพื่อชำระเงิน"}),(0,a.jsx)("img",{src:j,alt:"PromptPay QR Code",className:"mx-auto mb-4 w-60"}),(0,a.jsx)("p",{className:"text-blue-500",children:"⏳ กรุณาชำระเงินภายในระยะเวลา 5 นาที"}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-700",children:"❌ ปิด"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[615,636,593,792],()=>t(8834)),_N_E=e.O()}]);